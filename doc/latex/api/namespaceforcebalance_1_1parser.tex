\hypertarget{namespaceforcebalance_1_1parser}{\subsection{forcebalance.\-parser Namespace Reference}
\label{namespaceforcebalance_1_1parser}\index{forcebalance.\-parser@{forcebalance.\-parser}}
}


Input file parser for Force\-Balance jobs.  


\subsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{namespaceforcebalance_1_1parser_aef8b51dba6bb9767a9a956319eb3cc08}{read\-\_\-mvals}
\item 
def \hyperlink{namespaceforcebalance_1_1parser_a56fb1e139dad24bac29f25a3870765ca}{read\-\_\-pvals}
\item 
def \hyperlink{namespaceforcebalance_1_1parser_a94c3f1acd06b640db3042dc45e32af8e}{read\-\_\-priors}
\item 
def \hyperlink{namespaceforcebalance_1_1parser_a10827b0b21d0463bc9e786f161a02654}{read\-\_\-internals}
\item 
def \hyperlink{namespaceforcebalance_1_1parser_a00a8cb7b534312c13b11d4bb39bb3959}{printsection}
\begin{DoxyCompactList}\small\item\em Print out a section of the input file in a parser-\/compliant and readable format. \end{DoxyCompactList}\item 
def \hyperlink{namespaceforcebalance_1_1parser_ac184c809737a27f35530020322431f7c}{parse\-\_\-inputs}
\begin{DoxyCompactList}\small\item\em Parse through the input file and read all user-\/supplied options. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
tuple \hyperlink{namespaceforcebalance_1_1parser_ab1a411e01f194a0a8fc51b5aaf4b05ac}{logger} = get\-Logger(\-\_\-\-\_\-name\-\_\-\-\_\-)
\item 
dictionary \hyperlink{namespaceforcebalance_1_1parser_a1ccdff008f4be5f63c068d2a592d69ab}{gen\-\_\-opts\-\_\-types}
\begin{DoxyCompactList}\small\item\em Default general options. \end{DoxyCompactList}\item 
dictionary \hyperlink{namespaceforcebalance_1_1parser_a95436b7fb9e99bd7b9f0a040b15fbe3a}{tgt\-\_\-opts\-\_\-types}
\begin{DoxyCompactList}\small\item\em Default fitting target options. \end{DoxyCompactList}\item 
dictionary \hyperlink{namespaceforcebalance_1_1parser_a980fd024b1f2877247de482247250b9e}{gen\-\_\-opts\-\_\-defaults} = \{\}
\begin{DoxyCompactList}\small\item\em Default general options -\/ basically a collapsed veresion of gen\-\_\-opts\-\_\-types. \end{DoxyCompactList}\item 
dictionary \hyperlink{namespaceforcebalance_1_1parser_abb7a7e9723de629aa97727a85bcdbad1}{subdict} = \{\}
\item 
dictionary \hyperlink{namespaceforcebalance_1_1parser_aff4922444f06b7334a0994a835607393}{tgt\-\_\-opts\-\_\-defaults} = \{\}
\begin{DoxyCompactList}\small\item\em Default target options -\/ basically a collapsed version of tgt\-\_\-opts\-\_\-types. \end{DoxyCompactList}\item 
dictionary \hyperlink{namespaceforcebalance_1_1parser_a121eaaef101563523a8fb20bd5ace409}{bkwd} = \{\char`\"{}simtype\char`\"{} \-: \char`\"{}type\char`\"{}\}
\begin{DoxyCompactList}\small\item\em Option maps for maintaining backward compatibility. \end{DoxyCompactList}\item 
list \hyperlink{namespaceforcebalance_1_1parser_a682a3870774181592a7a4784ab108ae6}{mainsections} = \mbox{[}\char`\"{}S\-I\-M\-U\-L\-A\-T\-I\-O\-N\char`\"{},\char`\"{}T\-A\-R\-G\-E\-T\char`\"{},\char`\"{}O\-P\-T\-I\-O\-N\-S\char`\"{},\char`\"{}E\-N\-D\char`\"{},\char`\"{}N\-O\-N\-E\char`\"{}\mbox{]}
\begin{DoxyCompactList}\small\item\em Listing of sections in the input file. \end{DoxyCompactList}\item 
dictionary \hyperlink{namespaceforcebalance_1_1parser_a492c80e361e80dc74aebc13e7a072dfb}{Pars\-Tab}
\begin{DoxyCompactList}\small\item\em Pars\-Tab that refers to subsection parsers. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsubsection{Detailed Description}
Input file parser for Force\-Balance jobs. Additionally, the location for all default options.

Although I will do my best to write good documentation, for many programs the input parser becomes the most up-\/to-\/date source for documentation. So this is a great place to write lots of comments for those who implement new functionality.

There are two types of sections for options -\/ G\-E\-N\-E\-R\-A\-L and T\-A\-R\-G\-E\-T. Since there can be many fitting targets within a single job (i.\-e. we may wish to fit water trimers and hexamers, which constitutes two fitting targets) the input is organized into sections, like so\-:

\$options\par
 gen\-\_\-option\-\_\-1 Big\par
 gen\-\_\-option\-\_\-2 Mao\par
 \$target\par
 tgt\-\_\-option\-\_\-1 Sniffy\par
 tgt\-\_\-option\-\_\-2 Schmao\par
 \$target\par
 tgt\-\_\-option\-\_\-1 Nifty\par
 tgt\-\_\-option\-\_\-2 Jiffy\par
 \$end

In this case, two sets of target options are generated in addition to the general option.

(Note\-: \char`\"{}\-Target\char`\"{} used to be called \char`\"{}\-Simulation\char`\"{}. Backwards compatibility is maintained.)

Each option is meant to be parsed as a certain variable type.


\begin{DoxyItemize}
\item String option values are read in directly; note that only the first two words in the line are processed
\item Some strings are capitalized when they are read in; this is mainly for function tables like Opt\-Tab and Tgt\-Tab
\item List option types will pick up all of the words on the line and use them as values, plus if the option occurs more than once it will aggregate all of the values.
\item Integer and float option types are read in a pretty straightforward way
\item Boolean option types are always set to true, unless the second word is '0', 'no', or 'false' (not case sensitive)
\item Section option types are meant to treat more elaborate inputs, such as the user pasting in output parameters from a previous job as input, or a specification of internal coordinate system. I imagine that for every section type I would have to write my own parser. Maybe a Pars\-Tab of parsing functions would work. \-:)
\end{DoxyItemize}

To add a new option, simply add it to the dictionaries below and give it a default value if desired. If you add an entirely new type, make sure to implement the interpretation of that type in the parse\-\_\-inputs function.

\begin{DoxyAuthor}{Author}
Lee-\/\-Ping Wang 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
11/2012 
\end{DoxyDate}


\subsubsection{Function Documentation}
\hypertarget{namespaceforcebalance_1_1parser_ac184c809737a27f35530020322431f7c}{\index{forcebalance\-::parser@{forcebalance\-::parser}!parse\-\_\-inputs@{parse\-\_\-inputs}}
\index{parse\-\_\-inputs@{parse\-\_\-inputs}!forcebalance::parser@{forcebalance\-::parser}}
\paragraph[{parse\-\_\-inputs}]{\setlength{\rightskip}{0pt plus 5cm}def forcebalance.\-parser.\-parse\-\_\-inputs (
\begin{DoxyParamCaption}
\item[{}]{input\-\_\-file = {\ttfamily None}}
\end{DoxyParamCaption}
)}}\label{namespaceforcebalance_1_1parser_ac184c809737a27f35530020322431f7c}


Parse through the input file and read all user-\/supplied options. 

\begin{DoxyVerb} This is usually the first thing that happens when an executable script is called.
 Our parser first loads the default options, and then updates these options as it
 encounters keywords.

 Each keyword corresponds to a variable type; each variable type (e.g. string,
 integer, float, boolean) is treated differently.  For more elaborate inputs,
 there is a 'section' variable type.

 There is only one set of general options, but multiple sets of target options.
 Each target has its own section delimited by the \em $target keyword,
 and we build a list of target options.  
\end{DoxyVerb}



\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em input\-\_\-file} & The name of the input file. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
options General options. 

tgt\-\_\-opts List of fitting target options.
\end{DoxyReturn}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000017}{Todo}]Implement internal coordinates. 

Implement sampling correction. 

Implement charge groups. \end{DoxyRefDesc}


Definition at line 376 of file parser.\-py.



Here is the call graph for this function\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceforcebalance_1_1parser_ac184c809737a27f35530020322431f7c_cgraph}
\end{center}
\end{figure}


\hypertarget{namespaceforcebalance_1_1parser_a00a8cb7b534312c13b11d4bb39bb3959}{\index{forcebalance\-::parser@{forcebalance\-::parser}!printsection@{printsection}}
\index{printsection@{printsection}!forcebalance::parser@{forcebalance\-::parser}}
\paragraph[{printsection}]{\setlength{\rightskip}{0pt plus 5cm}def forcebalance.\-parser.\-printsection (
\begin{DoxyParamCaption}
\item[{}]{heading, }
\item[{}]{optdict, }
\item[{}]{typedict}
\end{DoxyParamCaption}
)}}\label{namespaceforcebalance_1_1parser_a00a8cb7b534312c13b11d4bb39bb3959}


Print out a section of the input file in a parser-\/compliant and readable format. 

\begin{DoxyVerb} At the time of writing of this function, it's mainly intended to be called by MakeInputFile.py.
 The heading is printed first (it is something like $options or $target).  Then it loops
 through the variable types (strings, allcaps, etc...) and the keys in each variable type.
 The one-line description of each key is printed out as a comment, and then the key itself is
 printed out along with the value provided in optdict.  If optdict is None, then the default
 value is printed out instead.
\end{DoxyVerb}



\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em heading} & Heading, either \$options or \$target \\
\hline
\mbox{\tt in}  & {\em optdict} & Options dictionary or None. \\
\hline
\mbox{\tt in}  & {\em typedict} & Option type dictionary, either gen\-\_\-opts\-\_\-types or tgt\-\_\-opts\-\_\-types specified in this file. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Answer List of strings for the section that we are printing out. 
\end{DoxyReturn}


Definition at line 279 of file parser.\-py.



Here is the call graph for this function\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceforcebalance_1_1parser_a00a8cb7b534312c13b11d4bb39bb3959_cgraph}
\end{center}
\end{figure}


\hypertarget{namespaceforcebalance_1_1parser_a10827b0b21d0463bc9e786f161a02654}{\index{forcebalance\-::parser@{forcebalance\-::parser}!read\-\_\-internals@{read\-\_\-internals}}
\index{read\-\_\-internals@{read\-\_\-internals}!forcebalance::parser@{forcebalance\-::parser}}
\paragraph[{read\-\_\-internals}]{\setlength{\rightskip}{0pt plus 5cm}def forcebalance.\-parser.\-read\-\_\-internals (
\begin{DoxyParamCaption}
\item[{}]{fobj}
\end{DoxyParamCaption}
)}}\label{namespaceforcebalance_1_1parser_a10827b0b21d0463bc9e786f161a02654}


Definition at line 253 of file parser.\-py.

\hypertarget{namespaceforcebalance_1_1parser_aef8b51dba6bb9767a9a956319eb3cc08}{\index{forcebalance\-::parser@{forcebalance\-::parser}!read\-\_\-mvals@{read\-\_\-mvals}}
\index{read\-\_\-mvals@{read\-\_\-mvals}!forcebalance::parser@{forcebalance\-::parser}}
\paragraph[{read\-\_\-mvals}]{\setlength{\rightskip}{0pt plus 5cm}def forcebalance.\-parser.\-read\-\_\-mvals (
\begin{DoxyParamCaption}
\item[{}]{fobj}
\end{DoxyParamCaption}
)}}\label{namespaceforcebalance_1_1parser_aef8b51dba6bb9767a9a956319eb3cc08}


Definition at line 228 of file parser.\-py.



Here is the call graph for this function\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceforcebalance_1_1parser_aef8b51dba6bb9767a9a956319eb3cc08_cgraph}
\end{center}
\end{figure}


\hypertarget{namespaceforcebalance_1_1parser_a94c3f1acd06b640db3042dc45e32af8e}{\index{forcebalance\-::parser@{forcebalance\-::parser}!read\-\_\-priors@{read\-\_\-priors}}
\index{read\-\_\-priors@{read\-\_\-priors}!forcebalance::parser@{forcebalance\-::parser}}
\paragraph[{read\-\_\-priors}]{\setlength{\rightskip}{0pt plus 5cm}def forcebalance.\-parser.\-read\-\_\-priors (
\begin{DoxyParamCaption}
\item[{}]{fobj}
\end{DoxyParamCaption}
)}}\label{namespaceforcebalance_1_1parser_a94c3f1acd06b640db3042dc45e32af8e}


Definition at line 244 of file parser.\-py.



Here is the call graph for this function\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceforcebalance_1_1parser_a94c3f1acd06b640db3042dc45e32af8e_cgraph}
\end{center}
\end{figure}


\hypertarget{namespaceforcebalance_1_1parser_a56fb1e139dad24bac29f25a3870765ca}{\index{forcebalance\-::parser@{forcebalance\-::parser}!read\-\_\-pvals@{read\-\_\-pvals}}
\index{read\-\_\-pvals@{read\-\_\-pvals}!forcebalance::parser@{forcebalance\-::parser}}
\paragraph[{read\-\_\-pvals}]{\setlength{\rightskip}{0pt plus 5cm}def forcebalance.\-parser.\-read\-\_\-pvals (
\begin{DoxyParamCaption}
\item[{}]{fobj}
\end{DoxyParamCaption}
)}}\label{namespaceforcebalance_1_1parser_a56fb1e139dad24bac29f25a3870765ca}


Definition at line 236 of file parser.\-py.



Here is the call graph for this function\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceforcebalance_1_1parser_a56fb1e139dad24bac29f25a3870765ca_cgraph}
\end{center}
\end{figure}




\subsubsection{Variable Documentation}
\hypertarget{namespaceforcebalance_1_1parser_a121eaaef101563523a8fb20bd5ace409}{\index{forcebalance\-::parser@{forcebalance\-::parser}!bkwd@{bkwd}}
\index{bkwd@{bkwd}!forcebalance::parser@{forcebalance\-::parser}}
\paragraph[{bkwd}]{\setlength{\rightskip}{0pt plus 5cm}dictionary forcebalance.\-parser.\-bkwd = \{\char`\"{}simtype\char`\"{} \-: \char`\"{}type\char`\"{}\}}}\label{namespaceforcebalance_1_1parser_a121eaaef101563523a8fb20bd5ace409}


Option maps for maintaining backward compatibility. 



Definition at line 223 of file parser.\-py.

\hypertarget{namespaceforcebalance_1_1parser_a980fd024b1f2877247de482247250b9e}{\index{forcebalance\-::parser@{forcebalance\-::parser}!gen\-\_\-opts\-\_\-defaults@{gen\-\_\-opts\-\_\-defaults}}
\index{gen\-\_\-opts\-\_\-defaults@{gen\-\_\-opts\-\_\-defaults}!forcebalance::parser@{forcebalance\-::parser}}
\paragraph[{gen\-\_\-opts\-\_\-defaults}]{\setlength{\rightskip}{0pt plus 5cm}dictionary forcebalance.\-parser.\-gen\-\_\-opts\-\_\-defaults = \{\}}}\label{namespaceforcebalance_1_1parser_a980fd024b1f2877247de482247250b9e}


Default general options -\/ basically a collapsed veresion of gen\-\_\-opts\-\_\-types. 



Definition at line 207 of file parser.\-py.

\hypertarget{namespaceforcebalance_1_1parser_a1ccdff008f4be5f63c068d2a592d69ab}{\index{forcebalance\-::parser@{forcebalance\-::parser}!gen\-\_\-opts\-\_\-types@{gen\-\_\-opts\-\_\-types}}
\index{gen\-\_\-opts\-\_\-types@{gen\-\_\-opts\-\_\-types}!forcebalance::parser@{forcebalance\-::parser}}
\paragraph[{gen\-\_\-opts\-\_\-types}]{\setlength{\rightskip}{0pt plus 5cm}dictionary forcebalance.\-parser.\-gen\-\_\-opts\-\_\-types}}\label{namespaceforcebalance_1_1parser_a1ccdff008f4be5f63c068d2a592d69ab}


Default general options. 

Note that the documentation is included in part of the key; this will aid in automatic doc-\/extraction. \-:) In the 5-\/tuple we have\-: Default value, priority (larger number means printed first), short docstring, description of scope, list of filter strings for pulling out pertinent targets (Make\-Input\-File.\-py) 

Definition at line 65 of file parser.\-py.

\hypertarget{namespaceforcebalance_1_1parser_ab1a411e01f194a0a8fc51b5aaf4b05ac}{\index{forcebalance\-::parser@{forcebalance\-::parser}!logger@{logger}}
\index{logger@{logger}!forcebalance::parser@{forcebalance\-::parser}}
\paragraph[{logger}]{\setlength{\rightskip}{0pt plus 5cm}tuple forcebalance.\-parser.\-logger = get\-Logger(\-\_\-\-\_\-name\-\_\-\-\_\-)}}\label{namespaceforcebalance_1_1parser_ab1a411e01f194a0a8fc51b5aaf4b05ac}


Definition at line 60 of file parser.\-py.

\hypertarget{namespaceforcebalance_1_1parser_a682a3870774181592a7a4784ab108ae6}{\index{forcebalance\-::parser@{forcebalance\-::parser}!mainsections@{mainsections}}
\index{mainsections@{mainsections}!forcebalance::parser@{forcebalance\-::parser}}
\paragraph[{mainsections}]{\setlength{\rightskip}{0pt plus 5cm}list forcebalance.\-parser.\-mainsections = \mbox{[}\char`\"{}S\-I\-M\-U\-L\-A\-T\-I\-O\-N\char`\"{},\char`\"{}T\-A\-R\-G\-E\-T\char`\"{},\char`\"{}O\-P\-T\-I\-O\-N\-S\char`\"{},\char`\"{}E\-N\-D\char`\"{},\char`\"{}N\-O\-N\-E\char`\"{}\mbox{]}}}\label{namespaceforcebalance_1_1parser_a682a3870774181592a7a4784ab108ae6}


Listing of sections in the input file. 



Definition at line 226 of file parser.\-py.

\hypertarget{namespaceforcebalance_1_1parser_a492c80e361e80dc74aebc13e7a072dfb}{\index{forcebalance\-::parser@{forcebalance\-::parser}!Pars\-Tab@{Pars\-Tab}}
\index{Pars\-Tab@{Pars\-Tab}!forcebalance::parser@{forcebalance\-::parser}}
\paragraph[{Pars\-Tab}]{\setlength{\rightskip}{0pt plus 5cm}dictionary forcebalance.\-parser.\-Pars\-Tab}}\label{namespaceforcebalance_1_1parser_a492c80e361e80dc74aebc13e7a072dfb}
{\bfseries Initial value\-:}
\begin{DoxyCode}
1 = \{\textcolor{stringliteral}{"read\_mvals"} : read\_mvals,
2             \textcolor{stringliteral}{"read\_pvals"} : read\_pvals,
3             \textcolor{stringliteral}{"priors"}     : read\_priors,
4             \textcolor{stringliteral}{"internal"}   : read\_internals
5             \}
\end{DoxyCode}


Pars\-Tab that refers to subsection parsers. 



Definition at line 257 of file parser.\-py.

\hypertarget{namespaceforcebalance_1_1parser_abb7a7e9723de629aa97727a85bcdbad1}{\index{forcebalance\-::parser@{forcebalance\-::parser}!subdict@{subdict}}
\index{subdict@{subdict}!forcebalance::parser@{forcebalance\-::parser}}
\paragraph[{subdict}]{\setlength{\rightskip}{0pt plus 5cm}dictionary forcebalance.\-parser.\-subdict = \{\}}}\label{namespaceforcebalance_1_1parser_abb7a7e9723de629aa97727a85bcdbad1}


Definition at line 209 of file parser.\-py.

\hypertarget{namespaceforcebalance_1_1parser_aff4922444f06b7334a0994a835607393}{\index{forcebalance\-::parser@{forcebalance\-::parser}!tgt\-\_\-opts\-\_\-defaults@{tgt\-\_\-opts\-\_\-defaults}}
\index{tgt\-\_\-opts\-\_\-defaults@{tgt\-\_\-opts\-\_\-defaults}!forcebalance::parser@{forcebalance\-::parser}}
\paragraph[{tgt\-\_\-opts\-\_\-defaults}]{\setlength{\rightskip}{0pt plus 5cm}dictionary forcebalance.\-parser.\-tgt\-\_\-opts\-\_\-defaults = \{\}}}\label{namespaceforcebalance_1_1parser_aff4922444f06b7334a0994a835607393}


Default target options -\/ basically a collapsed version of tgt\-\_\-opts\-\_\-types. 



Definition at line 215 of file parser.\-py.

\hypertarget{namespaceforcebalance_1_1parser_a95436b7fb9e99bd7b9f0a040b15fbe3a}{\index{forcebalance\-::parser@{forcebalance\-::parser}!tgt\-\_\-opts\-\_\-types@{tgt\-\_\-opts\-\_\-types}}
\index{tgt\-\_\-opts\-\_\-types@{tgt\-\_\-opts\-\_\-types}!forcebalance::parser@{forcebalance\-::parser}}
\paragraph[{tgt\-\_\-opts\-\_\-types}]{\setlength{\rightskip}{0pt plus 5cm}dictionary forcebalance.\-parser.\-tgt\-\_\-opts\-\_\-types}}\label{namespaceforcebalance_1_1parser_a95436b7fb9e99bd7b9f0a040b15fbe3a}


Default fitting target options. 



Definition at line 126 of file parser.\-py.

