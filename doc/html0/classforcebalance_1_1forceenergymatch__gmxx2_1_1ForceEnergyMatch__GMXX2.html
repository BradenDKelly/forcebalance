<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ForceBalance: forcebalance.forceenergymatch_gmxx2.ForceEnergyMatch_GMXX2 Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="ForceBalanceLogo_sm.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">ForceBalance
   &#160;<span id="projectnumber">0.11.0</span>
   </div>
   <div id="projectbrief">Automated optimization of force fields and empirical potentials</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="api/roadmap.html"><span>API</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="api/roadmap.html"><span>API</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="api/roadmap.html"><span>API</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="api/roadmap.html"><span>API</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="api/roadmap.html"><span>API</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="api/roadmap.html"><span>API</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="api/roadmap.html"><span>API</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="api/roadmap.html"><span>API</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="api/roadmap.html"><span>API</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="api/namespaces.html"><span>API</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="todo.html"><span>To-Do&#160;List</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="todo.html"><span>To-Do&#160;List</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="todo.html"><span>To-Do&#160;List</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="todo.html"><span>To-Do&#160;List</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="todo.html"><span>To-Do&#160;List</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="todo.html"><span>To-Do&#160;List</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="todo.html"><span>To-Do&#160;List</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="todo.html"><span>To-Do&#160;List</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="todo.html"><span>To-Do&#160;List</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="todo.html"><span>To-Do&#160;List</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="todo.html"><span>To-Do&#160;List</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="todo.html"><span>To-Do&#160;List</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="todo.html"><span>To-Do&#160;List</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="todo.html"><span>To-Do&#160;List</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="todo.html"><span>To-Do&#160;List</span></a></li>
      <li><a href="installation.html"><span>Installation</span></a></li>
      <li><a href="usage.html"><span>Usage</span></a></li>
      <li><a href="tutorial.html"><span>Tutorial</span></a></li>
      <li><a href="glossary.html"><span>Glossary</span></a></li>
      <li><a href="todo.html"><span>To-Do&#160;List</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>forcebalance</b>      </li>
      <li class="navelem"><b>forceenergymatch_gmxx2</b>      </li>
      <li class="navelem"><a class="el" href="classforcebalance_1_1forceenergymatch__gmxx2_1_1ForceEnergyMatch__GMXX2.html">ForceEnergyMatch_GMXX2</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a>  </div>
  <div class="headertitle">
<div class="title">forcebalance.forceenergymatch_gmxx2.ForceEnergyMatch_GMXX2 Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="forcebalance::forceenergymatch_gmxx2::ForceEnergyMatch_GMXX2" --><!-- doxytag: inherits="forceenergymatch::ForceEnergyMatch" -->
<p>ForceBalance class for force and energy matching with the modified GROMACS.  
 <a href="classforcebalance_1_1forceenergymatch__gmxx2_1_1ForceEnergyMatch__GMXX2.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for forcebalance.forceenergymatch_gmxx2.ForceEnergyMatch_GMXX2:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classforcebalance_1_1forceenergymatch__gmxx2_1_1ForceEnergyMatch__GMXX2__inherit__graph.svg" width="459" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for forcebalance.forceenergymatch_gmxx2.ForceEnergyMatch_GMXX2:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classforcebalance_1_1forceenergymatch__gmxx2_1_1ForceEnergyMatch__GMXX2__coll__graph.svg" width="459" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classforcebalance_1_1forceenergymatch__gmxx2_1_1ForceEnergyMatch__GMXX2-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classforcebalance_1_1forceenergymatch__gmxx2_1_1ForceEnergyMatch__GMXX2.html#a7876fd47fd9df4623651615ea13c6e57">__init__</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Instantiation of <a class="el" href="classforcebalance_1_1forceenergymatch__gmxx2_1_1ForceEnergyMatch__GMXX2.html" title="ForceBalance class for force and energy matching with the modified GROMACS.">ForceEnergyMatch_GMXX2</a>.  <a href="#a7876fd47fd9df4623651615ea13c6e57"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classforcebalance_1_1forceenergymatch__gmxx2_1_1ForceEnergyMatch__GMXX2.html#a0fafa73493dda29a4f610426d92e26bc">prepare_temp_directory</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare the temporary directory for running the modified GROMACS.  <a href="#a0fafa73493dda29a4f610426d92e26bc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classforcebalance_1_1forceenergymatch__gmxx2_1_1ForceEnergyMatch__GMXX2.html#a7c93c0aa5c3924f8af0b055cebbf139b">get</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls the modified GROMACS and collects the objective function contribution.  <a href="#a7c93c0aa5c3924f8af0b055cebbf139b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a38433f66b37f93f569223cea90dbc38a"></a><!-- doxytag: member="forcebalance::forceenergymatch_gmxx2::ForceEnergyMatch_GMXX2::callgmxx2" ref="a38433f66b37f93f569223cea90dbc38a" args="" -->
def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classforcebalance_1_1forceenergymatch__gmxx2_1_1ForceEnergyMatch__GMXX2.html#a38433f66b37f93f569223cea90dbc38a">callgmxx2</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Call the modified GROMACS! <br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab122401792a7dfc01cc1de7f0073f087"></a><!-- doxytag: member="forcebalance::forceenergymatch_gmxx2::ForceEnergyMatch_GMXX2::trajfnm" ref="ab122401792a7dfc01cc1de7f0073f087" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classforcebalance_1_1forceenergymatch__gmxx2_1_1ForceEnergyMatch__GMXX2.html#ab122401792a7dfc01cc1de7f0073f087">trajfnm</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the software to GROMACS no matter what. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a96cd550ee8340c15723e38f6422d3ac2"></a><!-- doxytag: member="forcebalance::forceenergymatch_gmxx2::ForceEnergyMatch_GMXX2::whamboltz" ref="a96cd550ee8340c15723e38f6422d3ac2" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>whamboltz</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a213a114b1e0ec8f973241cb6597b14e7"></a><!-- doxytag: member="forcebalance::forceenergymatch_gmxx2::ForceEnergyMatch_GMXX2::sampcorr" ref="a213a114b1e0ec8f973241cb6597b14e7" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>sampcorr</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4679a392606a929ea55f39111b77583e"></a><!-- doxytag: member="forcebalance::forceenergymatch_gmxx2::ForceEnergyMatch_GMXX2::covariance" ref="a4679a392606a929ea55f39111b77583e" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>covariance</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab0e1d94b9aacf3fb6e88e5731ec4778d"></a><!-- doxytag: member="forcebalance::forceenergymatch_gmxx2::ForceEnergyMatch_GMXX2::e_err" ref="ab0e1d94b9aacf3fb6e88e5731ec4778d" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>e_err</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac97075cce35a1ee4b7284d70a93e461e"></a><!-- doxytag: member="forcebalance::forceenergymatch_gmxx2::ForceEnergyMatch_GMXX2::f_err" ref="ac97075cce35a1ee4b7284d70a93e461e" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>f_err</b></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>ForceBalance class for force and energy matching with the modified GROMACS. </p>
<p>This class allows us to use a heavily modified version of GROMACS (a major component of this program) to compute the objective function contribution. The modified GROMACS does the looping through snapshots, computes the interactions as well as the derivatives, and sums them up to build the objective function. I will write that documentation elsewhere, perhaps when I port GROMACS over to version 4.5.4.</p>
<p>This class implements the 'get' method. When 'get' is called, the force field is printed to the temporary directory along with several files containing the information needed by the modified GROMACS (the Boltzmann weights, the parameters that need derivatives and their values, the QM energies and forces, and the energy / force weighting.)</p>
<p>The modified GROMACS is called with the arguments '-rerun all.gro -fortune -rerunvsite' to loop over the snapshots, turn on force matching functionality and reconstruct virtual site positions (an important consideration if we're changing the virtual site positions in the optimization). Its outputs are 'e2f2bc' which means 'energy squared, force squared, boltzmann corrected' and contains the objective function, 'a1dbc' and 'a2dbc' containing analytic first and second derivatives, 'gmxboltz' containing the Boltzmann weights used, and possibly some other stuff.</p>
<p>Most importantly, 'e2f2bc', 'a1dbc' and 'a2dbc' are read by 'get' after GROMACS is called and returned directly as the objective function contributions.</p>
<p>Other methods implemented in this class are related to the preparation of the temp directory. </p>

<p>Definition at line <a class="el" href="forceenergymatch__gmxx2_8py_source.html#l00062">62</a> of file <a class="el" href="forceenergymatch__gmxx2_8py_source.html">forceenergymatch_gmxx2.py</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7876fd47fd9df4623651615ea13c6e57"></a><!-- doxytag: member="forcebalance::forceenergymatch_gmxx2::ForceEnergyMatch_GMXX2::__init__" ref="a7876fd47fd9df4623651615ea13c6e57" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def <a class="el" href="classforcebalance_1_1forceenergymatch__gmxx2_1_1ForceEnergyMatch__GMXX2.html#a7876fd47fd9df4623651615ea13c6e57">forcebalance.forceenergymatch_gmxx2.ForceEnergyMatch_GMXX2.__init__</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sim_opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>forcefield</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Instantiation of <a class="el" href="classforcebalance_1_1forceenergymatch__gmxx2_1_1ForceEnergyMatch__GMXX2.html" title="ForceBalance class for force and energy matching with the modified GROMACS.">ForceEnergyMatch_GMXX2</a>. </p>
<p>Several important things happen here:</p>
<ul>
<li>We load in the coordinates from 'all.gro'.</li>
<li>We prepare the temporary directory. </li>
</ul>

<p>Definition at line <a class="el" href="forceenergymatch__gmxx2_8py_source.html#l00073">73</a> of file <a class="el" href="forceenergymatch__gmxx2_8py_source.html">forceenergymatch_gmxx2.py</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a7c93c0aa5c3924f8af0b055cebbf139b"></a><!-- doxytag: member="forcebalance::forceenergymatch_gmxx2::ForceEnergyMatch_GMXX2::get" ref="a7c93c0aa5c3924f8af0b055cebbf139b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def <a class="el" href="classforcebalance_1_1forceenergymatch__gmxx2_1_1ForceEnergyMatch__GMXX2.html#a7c93c0aa5c3924f8af0b055cebbf139b">forcebalance.forceenergymatch_gmxx2.ForceEnergyMatch_GMXX2.get</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mvals</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>AGrad</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>AHess</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tempdir</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calls the modified GROMACS and collects the objective function contribution. </p>
<p>First we create the force field using the parameter values that were passed in. Note that we may pass in physical parameters directly and bypass the coordinate transformation by setting self.usepvals to True.</p>
<p>The physical parameters are printed to 'pvals' for GROMACS to read - of course GROMACS knows the parameters already, but this facilitates retrieval from the low level subroutines.</p>
<p>Several switches are printed to files, such as:</p>
<ul>
<li>'FirstDerivativesOnly' to prevent computation of the Hessian</li>
<li>'NoDerivatives' to prevent computation of the Hessian AND the gradient</li>
</ul>
<p>GROMACS is called in the <a class="el" href="classforcebalance_1_1forceenergymatch__gmxx2_1_1ForceEnergyMatch__GMXX2.html#a38433f66b37f93f569223cea90dbc38a" title="Call the modified GROMACS!">callgmxx2()</a> method.</p>
<p>The output files are then parsed for the objective function and its derivatives are read in. The answer is passed out as a dictionary: {'X': Objective Function, 'G': Gradient, 'H': Hessian}</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mvals</td><td>Mathematical parameter values </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">AGrad</td><td>Switch to turn on analytic gradient </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">AHess</td><td>Switch to turn on analytic Hessian </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tempdir</td><td>Temporary directory for running computation </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Answer Contribution to the objective function</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000009">Todo:</a></b></dt><dd><p class="startdd">Some of these files don't need to be printed, they can be passed to GROMACS as arguments. Let's think about this some more. </p>
<p class="enddd">Currently I have no way to pass out the qualitative indicators.</p>
</dd></dl>

<p>Definition at line <a class="el" href="forceenergymatch__gmxx2_8py_source.html#l00204">204</a> of file <a class="el" href="forceenergymatch__gmxx2_8py_source.html">forceenergymatch_gmxx2.py</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classforcebalance_1_1forceenergymatch__gmxx2_1_1ForceEnergyMatch__GMXX2_a7c93c0aa5c3924f8af0b055cebbf139b_cgraph.svg" width="1051" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0fafa73493dda29a4f610426d92e26bc"></a><!-- doxytag: member="forcebalance::forceenergymatch_gmxx2::ForceEnergyMatch_GMXX2::prepare_temp_directory" ref="a0fafa73493dda29a4f610426d92e26bc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def <a class="el" href="classforcebalance_1_1forceenergymatch__gmxx2_1_1ForceEnergyMatch__GMXX2.html#a0fafa73493dda29a4f610426d92e26bc">forcebalance.forceenergymatch_gmxx2.ForceEnergyMatch_GMXX2.prepare_temp_directory</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sim_opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tempdir</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prepare the temporary directory for running the modified GROMACS. </p>
<p>This method creates the temporary directory, links in the necessary files for running (except for the force field), and writes the coordinate file for the snapshots we've chosen.</p>
<p>There are also files that specific to our *modified* GROMACS, including:</p>
<ul>
<li>qmboltz : The QM Boltzmann weights</li>
<li>bp : The QM vs. MM Boltzmann weight proportionality factor</li>
<li>whamboltz : The WHAM Boltzmann weights (i.e. MM Boltzmann weights passed from outside)</li>
<li>sampcorr : Boolean for the 'sampling correction', i.e. updating the Boltzmann factors when the force field is updated. This required a TON of implementation into the modified Gromacs, but in the end we didn't find it to be very useful. It basically emphasizes energy minima and gets barrier heights wrong. Blah! :)</li>
<li>fitatoms : The number of atoms that we're fitting, which may be less than the total number in the QM calculation (i.e. if we are fitting something to be compatible with a water model ...)</li>
<li>energyqm : QM reference energies</li>
<li>forcesqm : QM reference forces</li>
<li>ztemp : Template for Z-matrix coordinates (for internal coordinate forces)</li>
<li>pids : Information for building interaction name -&gt; parameter number hashtable</li>
</ul>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tempdir</td><td>The temporary directory to be prepared. </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000008">Todo:</a></b></dt><dd><p class="startdd">Someday I'd like to use WHAM to put AIMD simulations in. :) </p>
<p class="enddd">The fitatoms shouldn't be the first however many atoms, it should be a list.</p>
</dd></dl>

<p>Definition at line <a class="el" href="forceenergymatch__gmxx2_8py_source.html#l00112">112</a> of file <a class="el" href="forceenergymatch__gmxx2_8py_source.html">forceenergymatch_gmxx2.py</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>forcebalance/forcebalance/<a class="el" href="forceenergymatch__gmxx2_8py_source.html">forceenergymatch_gmxx2.py</a></li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Thu Feb 2 2012 13:21:20 for ForceBalance by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
